<div class="col-sm-2">
    <input style="margin-left: 15px;" class="btn btn-outline-danger" type="button" id="export" value="export"
        (click)="ExportOptions()" />
</div>
<ejs-diagram #diagram id="diagram" width="100%" height="600px" [layout]="layout" [pageSettings]="pageSettings"
    [getConnectorDefaults]="connDefaults" [getNodeDefaults]="nodeDefaults" [dataSourceSettings]="data" [tool]="tool" [scrollSettings]="scrollSettings"
    (created)="created()" [snapSettings]="snapSettings">
    <ng-template #nodeTemplate let-data>
        <ng-container>
            <div #nodeItem class="nodeitem" style="align-items: center; justify-content: center;background-color: white;height: 100%;box-shadow: rgba(0, 0, 0, 0.35) 0px 5px 15px;   
            border-radius: 20px;width: 100%;
            color: white;">
                <img [src]="data.data.pictureUrl"
                    style="width: 80px; height: 80px; border-radius: 50%; left:50%;transform: translate(-50%, -60%);position:absolute" />
                <span
                    [style.background-color]="data.data.assignType == 'cch_AssignTypePermanent' ? 'red' : data.data.assignType == 'cch_AssignTypeSecondment' ? 'blue' : data.data.assignType == 'cch_AssignTypeTemporary' ? 'green' : 'yellow'"
                    class="dot"></span>
                <div
                    style="height: 300px;display: flex;flex-direction: column;justify-content: center;align-items: center;row-gap: 10px;">
                    <span style="color: rgb(0, 0, 0); font-size: 20px;font-weight: bold;">{{
                        data.data.personNameDisplay}} {{data.data.nickNameDisplay}}</span>
                    <span *ngIf="data.data.personName2Display != null"
                        style="color: rgb(0, 0, 0); font-size: 20px;font-weight: bold;">{{
                        data.data.personName2Display}}</span>
                    <span *ngIf="data.data.birthDateDisplay != null"
                        style="color: rgb(0, 0, 0); font-size: 20px;font-weight: bold;">{{
                        data.data.birthDateDisplay}}</span>
                    <span style="color: rgb(0, 0, 0); font-size: 20px;font-weight: bold;">{{
                        data.data.positionName}}</span>
                    <span style="color: rgb(0, 0, 0); font-size: 20px;">{{
                        data.data.hiredDateDisplay}}</span>
                </div>
                <div *ngIf="data.data.totalImmSub > 0  && CheckValue(data.id)">
                    <button class="btn btn-dark"
                        style="height: 45px;width: 80px;border-radius: 25px;position: absolute;left: 50%;bottom: -10%;transform: translateX(-50%);font-size: 20px;"
                        (click)="Expand(data.id)"><span style="color: white;">{{data.data.totalImmSub}} </span><span
                            id="arrow"><i class="fa fa-angle-up"
                                style="font-size:30px;display: inline;color: white;"></i></span></button>
                </div>
                <div *ngIf="data.data.totalImmSub > 0  && CheckValue(data.id) == false">
                    <button class="btn btn-secondary"
                        style="height: 45px;width: 80px;border-radius: 25px;position: absolute;left: 50%;bottom: -10%;transform: translateX(-50%);font-size: 20px;"
                        (click)="Expand(data.id)"><span style="color: white;">{{data.data.totalImmSub}} </span><span
                            id="arrow"><i class="fa fa-angle-down"
                                style="font-size:30px;display: inline;color: white;"></i></span></button>
                </div>
            </div>
        </ng-container>
    </ng-template>
</ejs-diagram>